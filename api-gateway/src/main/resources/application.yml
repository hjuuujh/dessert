server:
  port: 8080

spring:
  application:
    name: api-gateway
  cloud:
    gateway:
      routes:
        - id: open-api
          uri: http://localhost:8090
          predicates:
            - Path=/api/member/signup, /api/member/signin # 회원가입과 로그인은 필터 적용 안함
        - id: member-api
          uri: http://localhost:8090
          predicates:
            - Path=/api/member/*
          filters:
            - name: AuthorizationHeaderFilter
              args:
                headerName: Authorization
                granted: Bearer
                role: ROLE_CUSTOMER

    config:
      label: master
      profile: dev
      uri: http://localhost:8888 # jwt secret key 있는 config server와 연결
      name: api-gateway

  config:
    import: optional:configserver:http://localhost:8888 # jwt secret key 있는 config server와 연결 & optional : config server 에서 응답을 받지 못해도 client 애플리케이션은 구동
  profiles:
    active: dev

eureka: # eureka client 등록
  instance:
    prefer-ip-address: true
  client:
    register-with-eureka: true
    fetch-registry: true
    serviceUrl:
      defaultZone: http://localhost:8761/eureka

management:
  endpoints:
    web:
      exposure:
        include: "*"


logging:
  level:
    org.springframework.security: debug
#    root: debug